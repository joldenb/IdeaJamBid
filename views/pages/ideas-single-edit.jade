doctype html
html
  head
    include ../partials/head.jade
  body
  .header.navbar.navbar-default
    include ../partials/header.jade

  .container-fluid.idea-summary.idea-summary-edit
    .row(class="visibility-row-#{idea.visibility}")
      .col-sm-4
        if idea.visibility == "private"
          a#visibilityLink
            h3 Visibility : #{idea.visibility.charAt(0).toUpperCase() + idea.visibility.slice(1)}
              span.glyphicon.glyphicon-pencil
        else
          h3 Visibility : #{idea.visibility.charAt(0).toUpperCase() + idea.visibility.slice(1)}
      if inventorName == user.username
        .col-sm-8.patent-strength-row
          .app-strength-bar.col-md-8
            .app-strength(class="#{appStrengthClass}") #{appStrengthText}
          .col-md-4.app-strength-button
            if appStrengthClass == "yes col-md-12" || idea.visibility == "public"
              a.btn.btn-go.btn-lg.btn-block#file-patent(data-toggle="modal" data-target="#filePatentModal") Generate Patent Application
            else
              a.btn.btn-go.btn-lg.btn-block#whats-left-link(data-toggle="modal" data-target="#whatsLeftModal") Next Steps
    .row#upload-images-row.idea-edit-row.odd-row 
      if listOfVisibleSections.indexOf('add-components-row') == -1
        .col-md-12
          h2 Upload Images
      else
        .col-md-12
          h2 Upload or Annotate Images
          h4 Click an image to annotate
      .imagesList
        - imageURLs.unshift("")
        each imageURL, index in imageURLs
          if( index % 4 == 0 )
            .row
              if ( index == 0 )
                .col-md-3
                  form(role='form', id="formImageUpload" action="/image-upload", method="post", data-idea-doc=idea, enctype="multipart/form-data")
                    .form-group
                      input(type="hidden", name="_csrf", value="#{csrfToken}")
                      label.btn.btn-block.btn-file#fileInput
                        .upload-image-div
                          span.glyphicon.glyphicon-cloud-upload.big-upload-icon
                        input(type="file", name="picture" style="display:none;")
              else if ( imageURL )
                .col-md-3
                  .image-container
                    a(href="/annotate-image/" + imageURL[0])
                      img.imageListItems(src=imageURL[1] style=imageURL[2])
              if ( imageURLs[index+1] )
                .col-md-3
                  .image-container
                    a(href="/annotate-image/" + imageURLs[index+1][0])
                      img.imageListItems(src=imageURLs[index+1][1] style=imageURLs[index+1][2])
              if ( imageURLs[index+2] )
                .col-md-3
                  .image-container
                    a(href="/annotate-image/" + imageURLs[index+2][0])
                      img.imageListItems(src=imageURLs[index+2][1] style=imageURLs[index+2][2])
              if ( imageURLs[index+3] )
                .col-md-3
                  .image-container
                    a(href="/annotate-image/" + imageURLs[index+3][0])
                      img.imageListItems(src=imageURLs[index+3][1] style=imageURLs[index+3][2])
      if listOfVisibleSections.indexOf('annotate-images-row') == -1
        .col-xs-12.next-step
          a#upload-image-next-btn.btn.btn-go.btn-lg.btn-block(href="#annotate-images-row") Next Step

    #annotate-images-row(class="odd-row idea-edit-row row #{listOfVisibleSections.indexOf('annotate-images-row') > -1 && listOfVisibleSections.indexOf('add-components-row') == -1 ? '' : 'hidden'}")
      .col-md-12
        h2 Add Components to your Images
        h4 Click an image to annotate
      .imagesList
        if(imageURLs.length > 0)
          each imageURL, index in imageURLs
            if( index % 4 == 0 )
              .row
                if ( imageURL )
                  .col-md-3
                    .image-container
                      a(href="/annotate-image/" + imageURL[0])
                        img.imageListItems(src=imageURL[1] style=imageURL[2])
                if ( imageURLs[index+1] )
                  .col-md-3
                    .image-container
                      a(href="/annotate-image/" + imageURLs[index+1][0])
                        img.imageListItems(src=imageURLs[index+1][1] style=imageURLs[index+1][2])
                if ( imageURLs[index+2] )
                  .col-md-3
                    .image-container
                      a(href="/annotate-image/" + imageURLs[index+2][0])
                        img.imageListItems(src=imageURLs[index+2][1] style=imageURLs[index+2][2])
                if ( imageURLs[index+3] )
                  .col-md-3
                    .image-container
                      a(href="/annotate-image/" + imageURLs[index+3][0])
                        img.imageListItems(src=imageURLs[index+3][1] style=imageURLs[index+3][2])
        else
          a(href="/image-upload")
            .upload-image-div
              span.glyphicon.glyphicon-cloud-upload.big-upload-icon
      if listOfVisibleSections.indexOf('add-components-row') == -1
        .col-xs-12.next-step
          a#annotate-image-next-btn.btn.btn-go.btn-lg.btn-block(href="#add-components-row") Next Step

    #add-components-row(class="odd-row idea-edit-row row #{listOfVisibleSections.indexOf('add-components-row') > -1 ? '' : 'hidden'}")
      .col-xs-12
        if idea.name
          h2 Components
          h4 Add any other components weren't already included in an image
        form(role='form', id="addIdeaComponent" action="/add-idea-component", method="post" data-idea-doc=idea)
          .form-group
            h4 Name the component:
            input#componentName.form-control(type="text", name="componentName", value='The ...')
            //- p (Example: "The Flux Capacitor")
            input(type="hidden", name="_csrf", value="#{csrfToken}")
            //- p.compNameCharRemaining
            h4 Describe the component:
            input#componentDescription.form-control(type="text", name="componentDescription", value='This component is described as ')
            //- p (Example: "This component is described as a power channeling device that processes 1.21 gigawatts to make time travel possible.")
            //- p.compDescrCharRemaining
            br
            button.btn.btn-industry.btn-lg#componentSubmit(type='submit') Save
      .col-md-12.list-all-components
        if components.length > 0
          each component, identifier in wholeSuggestionBlockInfo
            include ../partials/component-summary-element.jade
        else
          h4 <i>No Components Yet</i>
      if listOfVisibleSections.indexOf('add-aptitudes-row') == -1
        .col-xs-12.next-step
          a#add-components-next-btn.btn.btn-go.btn-lg.btn-block(href="#add-aptitudes-row") Next Step
      //- .col-xs-12
      //-   a(href='/ideas/' + idea.name + '/view-all-components')
      //-     button(type="button"  class="btn btn-industry btn-lg btn-block") View All Components

    #add-aptitudes-row(class="odd-row idea-edit-row row #{listOfVisibleSections.indexOf('add-aptitudes-row') > -1 ? '' : 'hidden'}")
      .col-xs-12
        #idea-summary-aptitudes.aptitudeList
          .profileAptitudes
            h2 Aptitude Areas
            h4 Add some areas of focus that relate directly to your invention, e.g. plumbing equipment
            if inventorName == user.username
              form(role='form', id="saveAptitude" action="/save-aptitude", method="post", data-idea-doc=idea)
                .form-group
                  |  
                  input(type="hidden", name="_csrf", value="#{csrfToken}")
                  input.form-control.ui-front(type='text', id="aptitudeTitle", name="aptitudeTitle", placeholder='New Aptitude..', autocomplete="on")
                  br    
                  button.btn.btn-industry.btn-lg#aptitudeSubmit(type='submit') Save
              ul
                each aptitude, aptIndex in aptitudes
                  li(data-apt-id="#{aptitude.identifier}") 
                    h4 #{aptitude.title}
      if listOfVisibleSections.indexOf('add-viability-scores-row') == -1
        .col-xs-12.next-step
          a#add-aptitudes-next-btn.btn.btn-go.btn-lg.btn-block(href="#add-viability-scores-row") Next Step

    #add-viability-scores-row(class="#{listOfVisibleSections.indexOf('add-viability-scores-row') > -1 ? 'row' : 'hidden row'}")
      .col-xs-1
        a.viabilty-slider-left-arrow
          img(src="/left-arrow.png")
      .col-xs-10.slide-content
        .viability-slide-wrapper
          .viability-scoring-intro-slide.score-slide
            .row
              .col-xs-4
              .col-xs-4
                h2 Score #{idea.name}
                h4 Give your invention an honest evaluation based on the following categories and it will help identify areas of improvement
                button.btn.btn-go.btn-lg.btn-block#beginScoring(type='submit') Go
              .col-xs-4
          .performability-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Performability
                h3 Will the #{idea.name} effectively work to solve the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.performability-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.performability-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.performability-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.performability-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.performability-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Incapable
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Effective
              .col-xs-1
            .problem-slide
              .row
                h3 Is there a specific reason for this low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Performability" )
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .affordability-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Affordability
                h3 Will #{idea.name} stay within reasonable cost expectations when solving the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.affordability-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.affordability-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.affordability-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.affordability-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.affordability-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Expensive
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Economical
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Affordability")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .featurability-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Featurability
                h3 Will #{idea.name} provide enough added benefits to solve the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.featurability-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.featurability-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.featurability-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.featurability-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.featurability-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Bland
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Multifaceted
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Featurability")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .deliverability-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Deliverability
                h3 Will #{idea.name} be ready on demand when and where the user wants it to solve the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.deliverability-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.deliverability-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.deliverability-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.deliverability-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.deliverability-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Unaccessible
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Available
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Deliverability")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .useability-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Useability
                h3 Will #{idea.name} be quickly and easily learned and implemented when solving the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.useability-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.useability-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.useability-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.useability-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.useability-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Impractical
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Pragmatic
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Useability")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .maintainability-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Maintainability
                h3 How easy will #{idea.name} be to keep in service when solving the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.maintainability-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.maintainability-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.maintainability-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.maintainability-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.maintainability-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Untenable
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Sustainable
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Maintainability")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .durability-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Durability
                h3 Is #{idea.name} robust enough to withstand abuse when solving the problem of #{idea.problem}? 
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.durability-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.durability-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.durability-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.durability-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.durability-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Unreliable
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Enduring
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Durability")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .imageability-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Imageability
                h3 Will #{idea.name} convey an image of quality and prestige when solving the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.imageability-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.imageability-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.imageability-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.imageability-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.imageability-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Undesirable
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Appealing
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Imageability")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .complexity-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Complexity
                h3 Will #{idea.name} require a large number of steps to produce, assemble, ship or use to solve the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.complexity-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.complexity-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.complexity-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.complexity-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.complexity-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Simple
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Complicated
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Complexity")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .precision-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Precision
                h3 Will #{idea.name} require specific timing, precise sequence or much practice to solve the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.precision-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.precision-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.precision-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.precision-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.precision-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Lenient
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Fussy
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Precision")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .variability-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Variability
                h3 Will use or production of #{idea.name} change based upon specific scenarios or circumstances when solving the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.variability-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.variability-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.variability-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.variability-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.variability-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Consistent
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Erratic
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Variability")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .sensitivity-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Sensitivity
                h3 Will usage or the environment easily disturb or damage #{idea.name} while solving the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.sensitivity-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.sensitivity-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.sensitivity-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.sensitivity-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.sensitivity-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Reliable
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Fragile
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Sensitivity")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .immaturity-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Immaturity
                h3 Will the design, manufacture, or production of #{idea.name} require new or unproven technology, processes or materials to solve the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.immaturity-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.immaturity-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.immaturity-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.immaturity-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.immaturity-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Developed
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Raw
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Immaturity")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .dangerous-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Dangerousness
                h3 Will #{idea.name} require human or environmental protections to reduce potential harm?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.dangerous-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.dangerous-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.dangerous-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.dangerous-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.dangerous-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Harmless
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Hazardous
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Danger")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel

          .skills-slide.score-slide
            .row.top-row.scoreIdea
              .col-xs-12
                h2.top-row-header Score #{idea.name}'s Level of Skills to Operate
                h3 Will #{idea.name} require many specific skills to solve the problem of #{idea.problem}?
            .row.scoring-stars
              .col-xs-1
              .col-xs-2
                img.star-one.skills-star(src="/empty-star.png")
              .col-xs-2
                img.star-two.skills-star(src="/empty-star.png")
              .col-xs-2
                img.star-three.skills-star(src="/empty-star.png")
              .col-xs-2
                img.star-four.skills-star(src="/empty-star.png")
              .col-xs-2
                img.star-five.skills-star(src="/empty-star.png")
              .col-xs-1
            .row.viability-labels
              .col-xs-1
              .col-xs-2
                h3 Easy
              .col-xs-2
              .col-xs-2
              .col-xs-2
              .col-xs-2
                h3 Onerous
              .col-xs-1
            .problem-slide
              .row
                h3 Why the low score?
                form(role='form', action="/add-idea-problem", method="post", data-idea-doc=idea)
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input.problemArea(type="hidden", value="Area : Skills")
                    textarea.problemStatement(class="form-control" rows="3")
                      | The problem is
                    p.exampleText (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
                    button.btn.btn-go.btn-block.btn-lg.problemSubmit(type='submit') Save & Continue
                      //- img.einstein-point-btn-icon(src="/single-einstein-point.png")
                    button.btn.btn-info.btn-block.btn-lg.problemContinue Cancel
          .viability-scoring-outro-slide.score-slide
            .row
              .col-xs-4
              .col-xs-4
                h2 Great job!
                h4 You're almost done. Think of any other areas of improvement for #{idea.name} and view your idea profile.
                a#add-viability-next-btn.btn.btn-go.btn-lg.btn-block(href="#add-imperfections-row") Next Step
              .col-xs-4

      .col-xs-1.viabilty-slider-right-arrow-column
        a.viabilty-slider-right-arrow
          img(src="/right-arrow.png")
    div(class="viability-icons row #{listOfVisibleSections.indexOf('add-viability-scores-row') > -1 ? '' : 'hidden'}")
      .col-xs-1
      .col-xs-10
        a.slide-icon-one
          img.performability-icon(src="/perfIcon.png")
        a.slide-icon-two
          img.affordability-icon(src="/affordIcon.png")
        a.slide-icon-three
          img.featurability-icon(src="/perfIcon.png")
        a.slide-icon-four
          img.deliverability-icon(src="/deliverabilityIcon.png")
        a.slide-icon-five
          img.useability-icon(src="/useabilityIcon.png")
        a.slide-icon-six
          img.maintainability-icon(src="/maintainabilityIcon.png")
        a.slide-icon-seven
          img.durability-icon(src="/durabilityIcon.png")
        a.slide-icon-eight
          img.imageability-icon(src="/imageabilityIcon.png")
        a.slide-icon-nine
          img.complexity-icon(src="/complexityIcon.png")
        a.slide-icon-ten
          img.precision-icon(src="/precisionIcon.png")
        a.slide-icon-eleven
          img.variability-icon(src="/variabilityIcon.png")
        a.slide-icon-twelve
          img.sensitivity-icon(src="/sensitivityIcon.png")
        a.slide-icon-thirteen
          img.immaturity-icon(src="/immaturityIcon.png")
        a.slide-icon-fourteen
          img.dangerous-icon(src="/dangerIcon.png")
        a.slide-icon-fifteen
          img.skills-icon(src="/skillsIcon.png")
      .col-xs-1
    
    #add-imperfections-row(class="odd-row #{listOfVisibleSections.indexOf('add-imperfections-row') > -1 ? 'idea-edit-row row' : 'hidden idea-edit-row row'}")
      .col-md-12.idea-seed-imperfections
        h2#imperfections-header Imperfections
        h4 Add any other imperfections that #{idea.name} may currently have that you'd like to improve
        form(role='form', id="addIdeaProblem" action="/add-idea-problem", method="post", data-idea-doc=idea)
          .form-group
            input(type="hidden", name="_csrf", value="#{csrfToken}")
            h4 Describe the imperfection:
            textarea.problemStatement(class="form-control" rows="3")
              | The problem is
            //- p (Example: "The time machine imperfection of needing to accelerate to 88 miles per hour before time travel is initiated.")
            //- p.charactersRemaining
            h4 Type of Imperfection:
            select.form-control#problemArea(required)
              each value in problemAreas
                option(value=value) #{value}
            br
            button.btn.btn-industry.btn-lg.individualProblemSubmit(type='submit') Save
        each problem, index in problems
          if(problem.text && problem['identifier'])
            include ../partials/problem-summary-element.jade
      .col-xs-12.complete-idea-editing
        a#complete-button.btn.btn-go.btn-lg.btn-block(href="/ideas/#{idea.name}") Complete

    .row(style="display:none;")
      if idea.name
        h1 #{idea.name.charAt(0).toUpperCase() + idea.name.slice(1)}
      if idea.name && inventorName == user.username
        h4 Your <b>#{idea.name.charAt(0).toUpperCase() + idea.name.slice(1)}</b> solves the <span class="problemColor">problem of #[a(href='/introduce-idea') #{idea.problem}]</span> by #[a(href='/accomplish') <span class="solutionColor">#{idea.description}]</span>.
      else if idea.name 
        h4 <b>#{idea.name.charAt(0).toUpperCase() + idea.name.slice(1)}</b> solves the <span class="problemColor">problem of #{idea.problem}</span> by <span class="solutionColor">#{idea.description}</span>.
      if (inventorName == user.username) && idea.visibility == "private" && idea.collaborators.length < 6
        .row
          .col-xs-12
            a.btn.btn-electric.btn-lg.btn-block#inviteCollaboratorsButton(type="button" data-toggle="modal" data-target="#inviteCollaboratorsModal") Invite Collaborators
      .row
        .col-xs-12
        if openCampaign !== undefined
          a.btn(type="button"  class="btn btn-go btn-lg btn-block" href='/ideas/' + idea.name + '/campaign' ontouchstart="this.style.background = '#007338';") Fund This Idea
        else if inventorName === user.username && idea.visibility === "public"
          a.btn(type="button"  class="btn btn-go btn-lg btn-block" href='/ideas/' + idea.name + '/campaign/new' ontouchstart="this.style.background = '#007338';") Crowdfund

    .row(style="display:none;")
      .col-md-12
        if idea.name
          h2.component-title Components of the #{idea.name.charAt(0).toUpperCase() + idea.name.slice(1)}
          if components.length > 0
            each component, identifier in wholeSuggestionBlockInfo
              include ../partials/component-summary-element.jade
          else
            h4 <i>No Components Yet</i>
        else
          <i>No components yet</i>
        if inventorName == user.username
          .row.idea-sumamart-buttons
            .col-xs-12
                button(type="button" id="componentModalButton"  class="btn btn-go btn-block btn-lg" data-toggle="modal" data-target="#addComponentModal") Add Component
        .row.idea-sumamart-buttons
          if components.length > 0
            .col-xs-12
              a(href='/ideas/' + idea.name + '/view-all-components')
                button(type="button"  class="btn btn-industry btn-lg btn-block") View All Components

      .col-sm-8.mobile-component-section
        a#components-expand-link
          h3 Components
            span#components-expand-icon.glyphicon.glyphicon-collapse-down
        .expandable-components-section(style="display:none;")
          if components.length > 0
              each component, identifier in wholeSuggestionBlockInfo
                include ../partials/component-summary-element.jade
            else
              h4 <i>No Components Yet</i>

        .row.mobile-only
          if inventorName != user.username
            .idea-summary-data#idea-summary-waste-values
              if(Object.keys(review).length > 0)
                .row
                  .col-xs-8
                    h4 Your current score for #{idea.name}: 
                  .col-xs-3
                    h3.average-score-number #{averageScore}
                img.ideajam-spinner(src="/IdeaJam-logo.gif" style="display:none;")
                a.btn(type="button"  class="btn btn-go" href="/view-single-overall-score" ontouchstart="this.style.background = '#007338';"  ontouchend="this.style.background = '#00A550';") Keep Scoring
              else
                img.ideajam-spinner(src="/IdeaJam-logo.gif" style="display:none;")                
                a.btn(type="button"  class="btn btn-go" href="/view-single-overall-score" ontouchstart="this.style.background = '#007338';" ontouchend="this.style.background = '#00A550';") Score Now
              br
          else
            .idea-summary-data#idea-summary-waste-values
              h4 You can only score someone else's ideas (right now)

    .row.idea-seed-feedback(style="display:none;")
      .col-xs-12
        a#feedback-expand-link
          h2 Feedback for #{idea.name}
            span#feedback-expand-icon.glyphicon.glyphicon-collapse-down

    .row.idea-seed-all-feedback-areas(style="display:none;")
      .col-md-4.score-idea-row
        h2#imperfections-header Viability Score
          a.btn.btn-go.btn-lg.btn-block.viabilityModalButton( type="button"  class="btn btn-go" data-toggle="modal" data-target="#viabilityModal") Score Viability Categories

      .col-md-4.idea-seed-suggestions
        h2 Suggestions to Imperfections
        .view-all-components-wrapper
          a.btn.btn-electric.btn-lg.btn-block#componentsViewAllLink(type="button" href='/ideas/' + idea.name + '/view-all-suggestions') View All Suggestions


  .pagefooter
    include ../partials/footer.jade

  #titleModal.modal.fade.annotate-modal(role="dialog")
    .modal-dialog
      .modal-content
        .modal-header
          .modal-title 
            if user.firstname
              h2 #{user.nickname}, name Your Idea
            else
              h2 Name Your Idea
            p Give your idea a short, descriptive, memorable name:
        .modal-body
          form(role='form', id="saveIdeaName" action="/save-idea-name", method="post", style='max-width: 300px;', data-idea-doc=idea)
            .form-group
              input(type="hidden", name="_csrf", value="#{csrfToken}")
              input.form-control(type="text", name="inventionName", value='My idea is called the ')
              p (Example: "My idea is called the DeLorean Time Machine")
              p.charactersRemaining
            .modal-footer
              button.btn.btn-success#titleSubmit(type='submit') Save
                img.einstein-point-btn-icon(src="/single-einstein-point.png")
          .row
            .col-xs-12
              .hint Hint: Choose a concise, catchy and descriptive name for your idea.



  #whatsLeftModal.modal.fade.annotate-modal(role="dialog")
    .modal-dialog
      .modal-content
        .modal-header
          button(type="button", class="close" data-dismiss="modal") &times;
          .modal-title 
            if idea.name
              h3 #{user.firstname}, add more details to complete your #{idea.name.charAt(0).toLowerCase() + idea.name.slice(1)} profile, because more details will generate a better patent application.
        .modal-body
          ul
            if idea.name
              each object, key in strengthResponse
                case key
                  when "description"
                    if object == ""
                      li Add a brief description of your #{idea.name}
                        a.whats-left-button.btn.btn-go( href="/accomplish" ) Go
                  when "problem"
                    if object == ""
                      li Add the main problem that your #{idea.name} is addressing
                      li Add a brief description of your #{idea.name.charAt(0).toLowerCase() + idea.name.slice(1)}
                        a.whats-left-button.btn.btn-go( href="/accomplish" ) Go 
                  when "problem"
                    if object == ""
                      li Add the problem that your #{idea.name.charAt(0).toLowerCase() + idea.name.slice(1)} Solves
                        a.whats-left-button.btn.btn-go( href="/introduce-idea" ) Go
                  when "name"
                    if object == ""
                      li Give your idea a name
                        a.whats-left-button.btn.btn-go#openTitleModal() Go
                  when "images"
                    if object.length < 2
                      li Add more sketch drawings or photos of your #{idea.name}
                        a.whats-left-button.btn.btn-go( href="/image-upload" ) Go
                  when "issues"
                    if object.length < 4
                      li Add more imperfections of your #{idea.name} remaining to be solved
                        a.whats-left-button.btn.btn-go#openAddProblemModal() Go
                  when "viabilityScores"
                    if appStrengthText == "NOT YET..." && object.length < 4
                      li Finish rating your #{idea.name} to complete its viability score
                        a.whats-left-button.btn.btn-go#openViabilityModal() Go
                    else if appStrengthText == "ALMOST..." && object.length < 15
                      li Finish rating your #{idea.name} to give it a viability score
                        a.whats-left-button.btn.btn-go#openViabilityModal() Go
                  when "imagesWithAnnotations"
                    if object.length < strengthResponse['images'].length 
                      li Add at least one tag to every #{idea.name} image
                        a.whats-left-button.btn.btn-go( href="/image-upload" ) Go
                  when "problemsWithSuggestions"
                    if object.length < strengthResponse['issues'].length
                      li Suggest at least one solution for each #{idea.name} imperfection
                        a.whats-left-button.btn.btn-go( href="/suggestion-summary" ) Go
                  when "compsWithRelationships"
                    if object.length < strengthResponse['allComponents'].length
                      li Explain how each component of #{idea.name} is related to at least one other component
                        a.whats-left-button.btn.btn-go#viewComponentsTab() Go
        .modal-footer
          button.btn.btn-success(data-dismiss="modal") Return to the #{idea.name} profile

  #viabilityModal.modal.fade(role="dialog")
    .modal-dialog
      .modal-content
        .modal-header
          button(type="button", class="close" data-dismiss="modal") &times;
          .modal-title
            if idea.name
              h2 Score #{idea.name.charAt(0).toLowerCase() + idea.name.slice(1)}
            else 
              h2 Score this idea
        .modal-body
          .view-all-viabilities
              include ../partials/viability-overview-modal.jade
          .view-specific-viability
        .modal-footer.view-all-button
            button.btn.btn-info.modal-view-all View All
            span.viabilityStatus 1/4
            button.btn.btn-success#viabilitySubmit(data-viability-category="view-all") Next

  #filePatentModal.modal.fade.annotate-modal(role="dialog")
    .modal-dialog
      .modal-content
        .modal-header
          button(type="button", class="close" data-dismiss="modal") &times;
          .modal-title 
            if idea.name
              h3 Visibility status of your #{idea.name.charAt(0).toLowerCase() + idea.name.slice(1)}
              h4 Protect yourself against others who might see and steal ideas from your #{idea.name.charAt(0).toLowerCase() + idea.name.slice(1)}.
              h4 IdeaJam can create a provisional patent application template for your #{idea.name.charAt(0).toLowerCase() + idea.name.slice(1)}.  Filing a patent application before making your ideas visible will provide you with patent pending status over #{idea.name.charAt(0).toLowerCase() + idea.name.slice(1)} earning you potential rights over anyone who later makes or sells the same idea.
            else
              h3 #{user.nickname}, name your idea before starting the process of generating a provisional patent application template.
        .modal-body
            if appStrengthClass == "yes col-md-12" || idea.visibility == "public"
              a.btn.btn-go#create-application-button( href="/create-application" ) Download Application
              br
              if !receipt
                form(role='form', id="prelimReceiptUpload" action="/receipt-upload", method="post", data-idea-doc=idea, enctype="multipart/form-data")
                  .form-group
                    input(type="hidden", name="_csrf", value="#{csrfToken}")
                    input#receiptInput(type="file", name="receipt")
              else
                a(href=receipt.amazonURL download)
                  p Receipt uploaded.
                h4 Variants
                each variantDate in variantDates
                  .row
                    a(href="/ideas/#{idea.name}/variant/"+variantDate[1]) #{variantDate[0]}

                a.btn.btn-go( href="/create-new-variant" ) Create a New Variant
                br
            else if appStrengthClass.indexOf("almost") > -1 || appStrengthClass.indexOf("not-yet") > -1
              if idea.name
                h4 Strong patent applications generally have more descriptions of the invention and its components.   To strengthen the provisional patent application template for your #{idea.name.charAt(0).toLowerCase() + idea.name.slice(1)}, you should enter more information about the concept.
              else
                h3 Name your idea before starting the process of generating a provisional patent application template.
            br

          .modal-footer
            button#enterMoreInformation.btn.btn-info(data-dismiss="modal") Enter More Information
            a.btn.btn-go#bypass-application-button(data-toggle="modal" data-target="#confirmExposeIdeaModal") Expose Idea Now

  #confirmExposeIdeaModal.modal.fade.annotate-modal(role="dialog")
    .modal-dialog
      .modal-content
        .modal-header
          button(type="button", class="close" data-dismiss="modal") &times;
          .modal-title 
            h2 Are you sure?
        .modal-body
          h5 If you expose this idea publicly prior to filing a patent application, you may lose your right to patent the idea. We recommend that you file a patent application before disclosing. Are you sure you want to make this idea public before obtaining patent pending status?
          .modal-footer
            button.btn.btn-industry(data-dismiss="modal") Cancel
            button#exposeIdeaNow.btn.btn-go Yes, Expose Now!


  button(type="button" id="titleModalButton" style="display:none;" class="btn btn-primary" data-toggle="modal" data-target="#titleModal") Go Win Fight

  #shareModal.modal.fade.annotate-modal(role="dialog")
    .modal-dialog
      .modal-content
        .modal-header
          button(type="button", class="close" data-dismiss="modal") &times;
          .modal-title 
            h2 Share Your Idea
        .modal-body
          form(role='form', id="shareForm" action="/share-idea", method="post", style='max-width: 300px;')
            .form-group
              input#toEmailAddress.form-control(type="email", name="toEmailAddress" placeholder="To:" required)
              input#fromEmailAddress.form-control(type="email", name="fromEmailAddress" placeholder="From:" required)
              input#emailSubject.form-control(type="text", name="emailSubject" placeholder="Subject:" required)
              textarea#emailBody.form-control(type="text", name="emailBody" placeholder="Body: (Include a link here!)" required)
              input(type="hidden", name="_csrf", value="#{csrfToken}")
              button.btn.btn-info(data-dismiss="modal") Cancel
              button.btn.btn-success#emailSend(type='submit') Send
                img.einstein-point-btn-icon(src="/single-einstein-point.png")


  #inviteCollaboratorsModal.modal.fade.annotate-modal(role="dialog")
    .modal-dialog
      .modal-content
        .modal-header
          button(type="button", class="close" data-dismiss="modal") &times;
          .modal-title 
            h2 Invite up to 6 Collaborators
        .modal-body
          form(role='form', id="inviteForm" action="/invite-collaborators", method="post")
            .form-group
              h3 Accepted Non-disclosure Agreement
              each collaborator, index in idea.collaborators
                .row
                  .col-xs-12 
                    h4 #{index + 1} : #{collaborator}
              - for (var i = 0; i < 6 - idea.collaborators.length; ++i) {
                .row
                  .col-xs-12 
                    input.form-control.collaboratorEmail(type="text" name="#{i}" placeholder="To:")
              - }
              input(type="hidden", name="_csrf", value="#{csrfToken}")
              button.btn.btn-success.btn-lg.btn-block#inviteCollaboratorSend(type='submit') Send
              button.btn.btn-info.btn-lg.btn-block(data-dismiss="modal") Cancel


  button(type="button" id="titleModalButton" style="display:none;" class="btn btn-primary" data-toggle="modal" data-target="#titleModal") Go Win Fight

  include ../partials/js-includes.jade
  script(src='/exif.js')
  script(type="text/javascript").
    $(document).ready(function(){
        if("!{idea.name}" == ""){
          $('#titleModal').modal('show');
        }
        if("!{idea.description}" == ""){
          $("#idea-summary-accomplish")
            .addClass("incomplete-data");
          $("#idea-summary-accomplish a")
            .before("<h4><i>No data entered</i></h4>");
        }
        if("!{idea.problem}" == ""){
          $("#idea-summary-challenge")
            .addClass("incomplete-data");
          $("#idea-summary-challenge a")
            .before("<h4><i>No data entered</i></h4>");
        }

        $("#enterMoreInformation").click(function(event){
          $("#whatsLeftModal").modal('show');
        })

        $("#openTitleModal").click(function(event){
          $("#whatsLeftModal").modal('hide');
          $('#titleModal').modal('show');
        })

        $("#openAddProblemModal").click(function(event){
          $("#whatsLeftModal").modal('hide');
          $('#addProblemModal').modal('show');
        })

        $("#openViabilityModal").click(function(event){
          $("#whatsLeftModal").modal('hide');
          $('.viabilityModalButton').click();
        })

        $("#viewComponentsTab").click(function(event){
          $("#whatsLeftModal").modal('hide');
          $('a').filter(function(index) { return $(this).text() === "Components"; }).click();
        })
    
        $(".viabilityModalButton").click(function(event){
          $.get('/get-all-viability-scores', function(returnData, status){
            $(".view-all-viabilities .ui-slider").html("");
            initializeAllSliders(returnData);
            if(status != "success"){
              alert("review not created correctly");
            }
          });
        });


        $(".upvote-imperfection").click(function(event){
          event.preventDefault();
          if(!$(this).hasClass("clicked-upvote")){
            $(this).addClass("clicked-upvote");
            $(this).text("Upvote " + (parseInt($(this).text().slice(7)) + 1));
          }

            $.post('/upvote-imperfection', 
            {
              _csrf : $('[name="_csrf"]').val(),
              problem : $(this)[0].dataset['problemId']
            },
            function(data, response) {
            });
          

          return false;
        });

        $(".upvote-suggestion").click(function(event){
          event.preventDefault();
          if(!$(this).hasClass("clicked-upvote")){
            $(this).addClass("clicked-upvote");
            $(this).text("Upvote " + (parseInt($(this).text().slice(7)) + 1));
          }

          $.post('/upvote-suggestion', 
          {
            _csrf : $('[name="_csrf"]').val(),
            suggestion : $(this)[0].dataset['suggestionId']
          },
          function(data, response) {
          });

          return false;
        });   
      var viabilitySliderWidth = $(".slide-content").width();
      $(".viability-slide-wrapper > div").attr("style", "width:" + viabilitySliderWidth + "px;");

      //twice the left-right margin on desktop size sliders
      viabilitySliderWidth += 30;

      $(".viabilty-slider-right-arrow").click(function(event){
        $.each($(".problem-slide").filter(":visible"),function(index, element){
          $(element).siblings(".scoring-stars").animate({
            "marginTop" : "+=10em",
            "width" : "100%"
          }, 500)
          $(element).siblings(".viability-labels").removeClass("hidden");
          $(element).hide()
        });
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: '+=' + viabilitySliderWidth}, 400);
      });

      $(".viabilty-slider-left-arrow").click(function(event){
        $.each($(".problem-slide").filter(":visible"),function(index, element){
          $(element).siblings(".scoring-stars").animate({
            "marginTop" : "+=10em;",
            "width" : "100%"
          }, 500)
          $(element).siblings(".viability-labels").removeClass("hidden");
          $(element).hide()
        });
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: '-=' + viabilitySliderWidth}, 400);
      });

      $("a.slide-icon-one").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 0}, 400);
      })
      $("a.slide-icon-two").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-three").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 2 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-four").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 3 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-five").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 4 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-six").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 5 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-seven").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 6 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-eight").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 7 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-nine").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 8 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-ten").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 9 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-eleven").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 10 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-twelve").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 11 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-thirteen").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 12 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-fourteen").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 13 * viabilitySliderWidth}, 400);
      })
      $("a.slide-icon-fifteen").click(function(event){
        $('#add-viability-scores-row .slide-content').animate( { scrollLeft: 14 * viabilitySliderWidth}, 400);
      })

    });


    $("#viabilityModal .cancel-button").click(function(event){
        $("#perfSlider").slider("destroy");
        $("#affordSlider").slider("destroy");
        $("#featureSlider").slider("destroy");
        $("#deliverSlider").slider("destroy");
        $("#useabilitySlider").slider("destroy");
        $("#maintainSlider").slider("destroy");
        $("#dangerSlider").slider("destroy");
        $("#durabilitySlider").slider("destroy");
        $("#imageSlider").slider("destroy");
        $("#complexSlider").slider("destroy");
        $("#precisionSlider").slider("destroy");
        $("#variabilitySlider").slider("destroy");
        $("#sensitivitySlider").slider("destroy");
        $("#immatureSlider").slider("destroy");
        $("#skillsSlider").slider("destroy");
    });


    $("#imperfections-header").click(function(event){
      $('#viewAllImperfections').modal('show');
    })

    $(".individualProblemSubmit").click(function(event){
      event.preventDefault();
      if ($(this).siblings(".problemStatement").val().length > 15){
        var newProblemStatement = $(this).siblings(".problemStatement").val().trim();
        $.post('/add-idea-problem', 
          {
            _csrf : $('[name="_csrf"]').val(),
            problemStatement : newProblemStatement.slice(15),
            problemArea : $("#problemArea option:selected").text(),
          },
          function(resp) {
            window.location.href= "/ideas/!{idea.name}/edit?r="+(new Date())+"#add-imperfections-row";
          });
      }
    });

    $(".problemSubmit").click(function(event){
      event.preventDefault();

      var problemText = $(this).siblings("textarea").val();

      if(problemText == "The problem is "){
        $(".viabilty-slider-right-arrow").click();
      } else if (problemText.length > 15){
        var newProblemStatement = problemText.trim();
        $.post('/add-idea-problem', 
          {
            _csrf : $('[name="_csrf"]').val(),
            problemStatement : newProblemStatement.slice(15),
            problemArea : $(this).siblings("input.problemArea").val()
          },
          function(resp) {
            $(".viabilty-slider-right-arrow").click();
          });
      } else {
        $(".viabilty-slider-right-arrow").click();
      }
    });

    $(".problemContinue").click(function(event){
      event.preventDefault();
      $(".problem-slide").filter(":visible").each(function(){
        $(this).siblings(".scoring-stars").animate({"marginTop": "+=10em", "width" : "100%"}, 500) 
        $(this).siblings(".viability-labels").removeClass("hidden");
        $(this).hide(500);
      })

    })

    $("#titleSubmit").click(function(event){
      event.preventDefault();
      if($("#saveIdeaName input[name='inventionName']").val() == "My idea is called the "){
        if($("#titleRequiredMessage").length == 0){
          $("<p id='titleRequiredMessage'>A title is required</p>").insertBefore("#saveIdeaName input[name='inventionName']");
        }
      } else {
        $.post('/save-idea-name', 
          {
            _csrf : $('[name="_csrf"]').val(),
            inventionName : $("#saveIdeaName input[name='inventionName']").val().trim(),
          },
          function(resp) {
            if(resp['newUrl']){
              window.location = resp['newUrl'];
            } else {
              window.location.reload(true);
            }
          });
      }
    })

    $("#componentSubmit").click(function(event){
      event.preventDefault();

      if($("#componentName").val() == "The ..." || $("#componentName").val() == "The "){
        $("#addComponentModal").modal('hide');
      } else {
        var newComponentName = $("#componentName").val().trim();
        var newComponentDescr;

        var data = {
            _csrf : $('[name="_csrf"]').val(),
            componentName : newComponentName.slice(4)
        };

        if($("#componentDescription").val().length > "This component is described as ".length){
          newComponentDescr = $("#componentDescription").val().trim();
          data['componentDescription'] = newComponentDescr.slice("This component is described as ".length)
        }

        $.post('/add-idea-component', 
          data,
          function(data, response) {
            window.location.href= "/ideas/!{idea.name}/edit?r="+(new Date())+"#add-components-row";
          });      
      }

    });

    $("#subComponentCheckbox").click(function(event){
      $("#parentComponentDropdown").show(400);
    });

    // This is for the idea name
    var inputName = $("#saveIdeaName input")[1];
    var requiredNameText = "My idea is called the "
    $("#saveIdeaName .charactersRemaining").text((30) + " characters remaining");
    inputName.addEventListener ("mousedown", function () {
      if (String($(this).val()).indexOf(requiredNameText) == -1 || String($(this).val()) == "My idea is called the ") {
            $(this).val(requiredNameText);
      }
      if (this.selectionStart < requiredNameText.length) {
        this.selectionStart = requiredNameText.length;
      }
    }, false);

    inputName.addEventListener ("keydown", function () {
      if (String($(this).val()).indexOf(requiredNameText) == -1) {
            $(this).val(requiredNameText);
      }
      if (this.selectionStart < requiredNameText.length) {
        this.selectionStart = requiredNameText.length;
      }
      $("#saveIdeaName input").keyup(function(){
        $("#saveIdeaName .charactersRemaining").text((30 + requiredNameText.length - $(this).val().length) + " characters remaining");
      });
    }, false);

    // This is for the problem input
    var inputProb = $(".problem-slide form textarea");
    var requiredProbText = "The problem is ";
    $.each(inputProb, function(index, value){
      value.addEventListener ("mousedown", function () {
        if (String($(this).val()).indexOf(requiredProbText) == -1) {
              $(this).val(requiredProbText);
        }
        if (this.selectionStart < 15) {
          this.selectionStart = 15;
        }
      }, false);

      value.addEventListener ("keydown", function () {
        if (String($(this).val()).indexOf(requiredProbText) == -1) {
              $(this).val(requiredProbText);
        }
        if (this.selectionStart < 15) {
          this.selectionStart = 15;
        }
      }, false);
    })

    // This is for the first text input field in the add component modal
    var inputOne = $("#addIdeaComponent input#componentName")[0];
    var requiredCompTextOne = "The "
    $("#addIdeaComponent .compNameCharRemaining").text((200) + " characters remaining");
    inputOne.addEventListener ("mousedown", function () {
      if (String($(this).val()).indexOf(requiredCompTextOne) == -1 || String($(this).val()) == "The ...") {
            $(this).val(requiredCompTextOne);
      }
      if (this.selectionStart < requiredCompTextOne.length) {
        this.selectionStart = requiredCompTextOne.length;
      }
    }, false);

    inputOne.addEventListener ("keydown", function () {
      if (String($(this).val()).indexOf(requiredCompTextOne) == -1 || String($(this).val()) == "The ...") {
            $(this).val(requiredCompTextOne);
      }
      if (this.selectionStart < requiredCompTextOne.length) {
        this.selectionStart = requiredCompTextOne.length;
      }
      $("#addIdeaComponent input#componentName").keyup(function(){
        $("#addIdeaComponent .compNameCharRemaining").text((200 + requiredCompTextOne.length - $(this).val().length) + " characters remaining");
      });
    }, false);

    // This is for the second text input field in the add component modal
    var inputTwo = $("#addIdeaComponent input#componentDescription")[0];
    var requiredCompTextTwo = "This component is described as "
    $("#addIdeaComponent .compDescrCharRemaining").text((200) + " characters remaining");
    inputTwo.addEventListener ("mousedown", function () {
      if (String($(this).val()).indexOf(requiredCompTextTwo) == -1) {
            $(this).val(requiredCompTextTwo);
      }
      if (this.selectionStart < "This component is described as ".length) {
        this.selectionStart = "This component is described as ".length;
      }
    }, false);

    inputTwo.addEventListener ("keydown", function () {
      if (String($(this).val()).indexOf(requiredCompTextTwo) == -1) {
            $(this).val(requiredCompTextTwo);
      }
      if (this.selectionStart < "This component is described as ".length) {
        this.selectionStart = "This component is described as ".length;
      }
      $("#addIdeaComponent input#componentDescription").keyup(function(){
        $("#addIdeaComponent .compDescrCharRemaining").text((200 + requiredCompTextTwo.length - $(this).val().length) + " characters remaining");
      });
    }, false);

    $("#aptitudeSubmit").click(function(event){
      event.preventDefault();
      if($("#aptitudeTitle").val() != ""){
        var newAptitude = $("#aptitudeTitle").val().trim();
        $.post('/save-aptitude', 
          {
            _csrf : $('[name="_csrf"]').val(),
            ideaName : "!{idea.name}",
            aptitudeTitle : newAptitude
          },
          function(resp) {
            window.location.href= "/ideas/!{idea.name}/edit?r="+(new Date())+"#add-aptitudes-row";
          });
      } else {
        alert("Please enter a valid aptitude.");
      }
    });

    if(document.getElementById("receiptInput")){
      document.getElementById("receiptInput").onchange = function(event) {
        $("<img id='spinner' src='/spinner.gif'>").insertAfter("#prelimReceiptUpload");
        const files = document.getElementById('receiptInput').files;
        const file = files[0];
        const csrf = $("input[name='_csrf']").val();
        if(file == null){
          return alert('No file selected.');
        }
        var fr   = new FileReader;
        
        fr.onloadend = function() {
          var exif = EXIF.readFromBinaryFile(this.result);
          if(file.size < 3000000){
            getSignedRequest(file, csrf, exif);
          } else if (file.size > 3000000){
            alert('Please choose an image smaller than 3 MB.')
          } else {
            alert('An error ocurred with this image.')
          }

        };

        fr.readAsArrayBuffer(file); // read the file


      };

      function uploadFile(file, signedRequest, url, csrf, exif){
        const xhr = new XMLHttpRequest();
        xhr.open('PUT', signedRequest);
        xhr.onreadystatechange = function() {
          if(xhr.readyState === 4){
            if(xhr.status === 200 && (file.type=="application/pdf")){
              var data = {"filename" : file.name, "fileUrl" : url, "type" : file.type,
                "_csrf" : csrf, exif : exif };
              $.post('/receipt-upload', data , function(response, status){
                if(status == 200){
                  window.location.reload();
                } else {
                  alert('An error ocurred while uploading receipt.')
                }
              });
            }
            else{
              alert('Please upload PDF.');
            }
          }
        };
        xhr.send(file);
      }

      function getSignedRequest(file, csrf,exif){
        const xhr = new XMLHttpRequest();
        var filename = file.name.split(".");
        filename[0] = filename[0] + "-" + Date.now().toString();
        filename = filename.join(".");
        xhr.open('GET', '/sign-s3?file-name='+ filename + '&file-type='+ file.type);
        xhr.onreadystatechange = function() {
          if(xhr.readyState === 4){
            if(xhr.status === 200){
              var response;
              if(xhr.responseText == ""){
                response = JSON.parse('{}');
              } else {
                response = JSON.parse(xhr.responseText);
              }
              uploadFile(file, response.signedRequest, response.url, csrf, exif);
            }
            else{
              alert('Could not get signed URL.');
            }
          } 
          
        };
        xhr.send();
      }
    }

    $("#emailSend").click(function(event){
      event.preventDefault();
        $.post('/share-idea', 
          {
            _csrf : $('[name="_csrf"]').val(),
            toEmailAddress : $("#toEmailAddress").val(),
            fromEmailAddress : $("#fromEmailAddress").val(),
            emailSubject : $("#emailSubject").val(),
            emailBody : $("#emailBody").val()
          },
          function(resp) {
            window.location.reload(true);
          });
    });

    $("#inviteCollaboratorSend").click(function(event){
      //if there are no collaborator emails entered, just close the modal or something

      event.preventDefault();

      $("#inviteCollaboratorsModal").modal('hide')

      var data = {
          _csrf : $('[name="_csrf"]').val()
      };

      $(".collaboratorEmail").each(function(index){
        data['collaborator-email-' + index] = $(this).val();
      });

      $.post('/send-collaborators-nda-email', data,
        function(resp) {
          window.location.reload(true);
        });
    })

    $("#exposeIdeaNow").click(function(event){
      $.get("/expose-idea-seed", function(err, response){
        window.location.reload(true);
      });
    })

    $("#feedback-expand-link").click(function(event){
      if($(".row.idea-seed-all-feedback-areas").is(":visible")){
        $(".row.idea-seed-all-feedback-areas").hide(400)
        $("#feedback-expand-icon").removeClass("glyphicon-collapse-up").addClass("glyphicon-collapse-down")
      } else {
        $(".row.idea-seed-all-feedback-areas").show(400)
        $("#feedback-expand-icon").removeClass("glyphicon-collapse-down").addClass("glyphicon-collapse-up")
      }
    })

    $("#components-expand-link").click(function(event){
      if($(".expandable-components-section").is(":visible")){
        $(".expandable-components-section").hide(400)
        $("#components-expand-icon").removeClass("glyphicon-collapse-up").addClass("glyphicon-collapse-down")
      } else {
        $(".expandable-components-section").show(400)
        $("#components-expand-icon").removeClass("glyphicon-collapse-down").addClass("glyphicon-collapse-up")
      }
    })


    $("#visibilityLink").click(function(event){
      $("#filePatentModal").modal('show');
    })

    if($("#fileInput [type='file']").length > 0){

      $("#fileInput [type='file']")[0].onchange = function(event) {
        $("<img id='spinner' src='/spinner.gif'>").insertAfter("#formImageUpload");
        const files = $("#fileInput [type='file']")[0].files;
        const file = files[0];
        const csrf = $("input[name='_csrf']").val();
        if(file == null){
          return alert('No file selected.');
        }
        var fr   = new FileReader;
        
        fr.onloadend = function() {
          // get EXIF data
          var exif = EXIF.readFromBinaryFile(this.result);

          if(file.size < 3000000){
            getSignedRequest(file, exif, csrf);
          } else if (file.size > 3000000){
            alert('Please choose an image smaller than 3 MB.')
          } else {
            alert('An error ocurred with this image.')
          }

        };

        fr.readAsArrayBuffer(file); // read the file


      };

      function uploadFile(file, signedRequest, url, exif, csrf){
        const xhr = new XMLHttpRequest();
        xhr.open('PUT', signedRequest);
        xhr.onreadystatechange = function() {
          if(xhr.readyState === 4){
            if(xhr.status === 200 && (file.type=="image/jpeg" || file.type=="image/png")){
              var data = {"filename" : file.name, "fileUrl" : url, "type" : file.type,
                exif : exif, "_csrf" : csrf };
              $.post('/image-upload', data , function(response, status){
                window.location.reload(true);
              });
            }
            else{
              alert('Could not upload file.');
            }
          }
        };
        xhr.send(file);
      }

      function getSignedRequest(file, exif, csrf){
        const xhr = new XMLHttpRequest();
        var filename = file.name.split(".");
        filename[0] = filename[0] + "-" + Date.now().toString();
        filename = filename.join(".");
        xhr.open('GET', '/sign-s3?file-name='+ filename + '&file-type='+ file.type);
        xhr.onreadystatechange = function() {
          if(xhr.readyState === 4 && xhr.responseText != ""){
            if(xhr.status === 200){
              var response = JSON.parse(xhr.responseText);
              uploadFile(file, response.signedRequest, response.url, exif, csrf);
            }
            else{
              alert('Could not get signed URL.');
            }
          } 
          
        };
        xhr.send();
      }
    }

    $(document).on('click', '.next-step a', function(event){
        event.preventDefault();

        $('html, body').animate({
            scrollTop: $( $.attr(this, 'href') ).offset().top
        }, 500);
    });

    $(".scoring-stars img").click(function(event){
      
      var scoreClass = "",
          saveScoreRoute = "",
          scoreName = "",
          problemName = "",
          iconClass = "",
          slideClass = "";

      if($(this).hasClass("performability-star")){
        scoreClass = "performability-star";
        saveScoreRoute = "/performability-mobile";
        scoreName = "performOne";
        problemName = "performProblem";
        iconClass = "performability-icon";
        slideClass = "performability-slide";

      } else if($(this).hasClass("affordability-star")){
        scoreClass = "affordability-star";
        saveScoreRoute = "/affordability-mobile";
        scoreName = "affordOne";
        problemName = "affordProblem";
        iconClass = "affordability-icon";
        slideClass = "affordability-slide";

      } else if($(this).hasClass("featurability-star")){
        scoreClass = "featurability-star";
        saveScoreRoute = "/featurability-mobile";
        scoreName = "featureOne";
        problemName = "featureProblem";
        iconClass = "featurability-icon";
        slideClass = "featurability-slide";

      } else if($(this).hasClass("deliverability-star")){
        scoreClass = "deliverability-star";
        saveScoreRoute = "/deliverability-mobile";
        scoreName = "deliverOne";
        problemName = "deliverProblem";
        iconClass = "deliverability-icon";
        slideClass = "deliverability-slide";

      } else if($(this).hasClass("useability-star")){
        scoreClass = "useability-star";
        saveScoreRoute = "/useability-mobile";
        scoreName = "useabilityOne";
        problemName = "useabilityOne";
        iconClass = "useability-icon";
        slideClass = "useability-slide";

      } else if($(this).hasClass("maintainability-star")){
        scoreClass = "maintainability-star";
        saveScoreRoute = "/maintainability-mobile";
        scoreName = "maintainOne";
        problemName = "maintainOne";
        iconClass = "maintainability-icon";
        slideClass = "maintainability-slide";

      } else if($(this).hasClass("durability-star")){
        scoreClass = "durability-star";
        saveScoreRoute = "/durability-mobile";
        scoreName = "durabilityOne";
        problemName = "durabilityOne";
        iconClass = "durability-icon";
        slideClass = "durability-slide";

      } else if($(this).hasClass("imageability-star")){
        scoreClass = "imageability-star";
        saveScoreRoute = "/imageability-mobile";
        scoreName = "imageOne";
        problemName = "imageProblem";
        iconClass = "imageability-icon";
        slideClass = "imageability-slide";

      } else if($(this).hasClass("complexity-star")){
        scoreClass = "complexity-star";
        saveScoreRoute = "/complexity-mobile";
        scoreName = "complexOne";
        problemName = "complexProblem";
        iconClass = "complexity-icon";
        slideClass = "complexity-slide";

      } else if($(this).hasClass("precision-star")){
        scoreClass = "precision-star";
        saveScoreRoute = "/precision-mobile";
        scoreName = "precisionOne";
        problemName = "precisionProblem";
        iconClass = "precision-icon";
        slideClass = "precision-slide";

      } else if($(this).hasClass("variability-star")){
        scoreClass = "variability-star";
        saveScoreRoute = "/variability-mobile";
        scoreName = "variabilityOne";
        problemName = "variabilityProblem";
        iconClass = "variability-icon";
        slideClass = "variability-slide";

      } else if($(this).hasClass("sensitivity-star")){
        scoreClass = "sensitivity-star";
        saveScoreRoute = "/sensitivity-mobile";
        scoreName = "sensitivityOne";
        problemName = "sensitivityProblem";
        iconClass = "sensitivity-icon";
        slideClass = "sensitivity-slide";

      } else if($(this).hasClass("immaturity-star")){
        scoreClass = "immaturity-star";
        saveScoreRoute = "/immaturity-mobile";
        scoreName = "immatureOne";
        problemName = "immatureProblem";
        iconClass = "immaturity-icon";
        slideClass = "immaturity-slide";

      } else if($(this).hasClass("dangerous-star")){
        scoreClass = "dangerous-star";
        saveScoreRoute = "/dangerous-mobile";
        scoreName = "dangerOne";
        problemName = "dangerProblem";
        iconClass = "dangerous-icon";
        slideClass = "dangerous-slide";

      } else if($(this).hasClass("skills-star")){
        scoreClass = "skills-star";
        saveScoreRoute = "/skills-mobile";
        scoreName = "skillsOne";
        problemName = "skillsProblem";
        iconClass = "skills-icon";
        slideClass = "skills-slide";

      }

      if( $(this).hasClass("star-one") ){
        $("img.star-one." + scoreClass).addClass("scored");
        $("img.star-two." + scoreClass).removeClass("scored");
        $("img.star-three." + scoreClass).removeClass("scored");
        $("img.star-four." + scoreClass).removeClass("scored");
        $("img.star-five." + scoreClass).removeClass("scored");

        $("." + iconClass).addClass("scored");

        var data = {_csrf : $('[name="_csrf"]').val()};
        data[scoreName] = 20;
        data[problemName] = "";

        $.post(saveScoreRoute, data);

        $(this).parent().parent().animate({"marginTop": "-=10em", "width" : "40%"}, 500)
        $(this).parent().parent().siblings(".viability-labels").addClass("hidden");
        $(this).parent().parent().siblings($(".problem-slide")).show(500);

      } else if ($(this).hasClass("star-two") ){
        $("img.star-one." + scoreClass).addClass("scored");
        $("img.star-two." + scoreClass).addClass("scored");
        $("img.star-three." + scoreClass).removeClass("scored");
        $("img.star-four." + scoreClass).removeClass("scored");
        $("img.star-five." + scoreClass).removeClass("scored");

        $("." + iconClass).addClass("scored");

        var data = {_csrf : $('[name="_csrf"]').val()};
        data[scoreName] = 40;
        data[problemName] = "";

        $.post(saveScoreRoute, data);

        $(".viabilty-slider-right-arrow").click();

      } else if ($(this).hasClass("star-three") ){
        $("img.star-one." + scoreClass).addClass("scored");
        $("img.star-two." + scoreClass).addClass("scored");
        $("img.star-three." + scoreClass).addClass("scored");
        $("img.star-four." + scoreClass).removeClass("scored");
        $("img.star-five." + scoreClass).removeClass("scored");

        $("." + iconClass).addClass("scored");

        var data = {_csrf : $('[name="_csrf"]').val()};
        data[scoreName] = 60;
        data[problemName] = "";

        $.post(saveScoreRoute, data);

        $(".viabilty-slider-right-arrow").click();

      } else if ($(this).hasClass("star-four") ){
        $("img.star-one." + scoreClass).addClass("scored");
        $("img.star-two." + scoreClass).addClass("scored");
        $("img.star-three." + scoreClass).addClass("scored");
        $("img.star-four." + scoreClass).addClass("scored");
        $("img.star-five." + scoreClass).removeClass("scored");

        $("." + iconClass).addClass("scored");

        var data = {_csrf : $('[name="_csrf"]').val()};
        data[scoreName] = 80;
        data[problemName] = "";

        $.post(saveScoreRoute, data);

        $(".viabilty-slider-right-arrow").click();

      } else if ($(this).hasClass("star-five") ){
        $("img.star-one." + scoreClass).addClass("scored");
        $("img.star-two." + scoreClass).addClass("scored");
        $("img.star-three." + scoreClass).addClass("scored");
        $("img.star-four." + scoreClass).addClass("scored");
        $("img.star-five." + scoreClass).addClass("scored");

        $("." + iconClass).addClass("scored");

        var data = {_csrf : $('[name="_csrf"]').val()};
        data[scoreName] = 100;
        data[problemName] = "";

        $.post(saveScoreRoute, data);

        $(".viabilty-slider-right-arrow").click();

      }

    });

    $("#upload-image-next-btn").click(function(event){
      event.preventDefault();

      var data = {
        _csrf : $('[name="_csrf"]').val(),
        newEditingSection : "annotate-images-row",
        ideaName : "!{idea.name}"
      }

      $.post("/add-idea-editing-section", data, function(data, response){
        window.location.href= "/ideas/!{idea.name}/edit?r="+(new Date())+"#annotate-images-row";
      });

    });

    $("#annotate-image-next-btn").click(function(event){
      event.preventDefault();

      var data = {
        _csrf : $('[name="_csrf"]').val(),
        newEditingSection : "add-components-row",
        ideaName : "!{idea.name}"
      }

      $.post("/add-idea-editing-section", data, function(data, response){
        window.location.href= "/ideas/!{idea.name}/edit?r="+(new Date())+"#add-components-row";
      });
    });    

    $("#add-components-next-btn").click(function(event){
      event.preventDefault();

      var data = {
        _csrf : $('[name="_csrf"]').val(),
        newEditingSection : "add-aptitudes-row",
        ideaName : "!{idea.name}"
      }

      $.post("/add-idea-editing-section", data, function(data, response){
        window.location.href= "/ideas/!{idea.name}/edit?r="+(new Date())+"#add-aptitudes-row";
      });
    });    

    $("#add-aptitudes-next-btn").click(function(event){
      event.preventDefault();

      var data = {
        _csrf : $('[name="_csrf"]').val(),
        newEditingSection : "add-viability-scores-row",
        ideaName : "!{idea.name}"
      }

      $.post("/add-idea-editing-section", data, function(data, response){
        window.location.href= "/ideas/!{idea.name}/edit?r="+(new Date())+"#add-viability-scores-row";
      });
    });    

    $("#add-viability-next-btn").click(function(event){
      event.preventDefault();

      var data = {
        _csrf : $('[name="_csrf"]').val(),
        newEditingSection : "add-imperfections-row",
        ideaName : "!{idea.name}"
      }

      $.post("/add-idea-editing-section", data, function(data, response){
        window.location.href= "/ideas/!{idea.name}/edit?r="+(new Date())+"#add-imperfections-row";
      });
    });    


    $("#beginScoring").click(function(event){
      $(".viabilty-slider-right-arrow").click();
    })
