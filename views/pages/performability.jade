doctype html
html
  head
    title= title
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    link(href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css', rel='stylesheet', media='screen')
    link(rel='stylesheet', href='/stylesheets/main.css')
    link(rel='stylesheet', href='//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css')  
  body
  .header
    span.userName Howdy #{user.username}
    |  
    a.home-logout.btn.btn-default( href="/logout" ) Log Out

  form(role='form', id="formPerformability" action="/performability", method="post", style='max-width: 600px;', data-idea-doc=idea)
    .container.scoreIdea
    h1 Performability
    h4
      | Will the product perform the way I want?
    br
    .slider-container
      .slider-end-labels
        span.no-way No Way
        span.yes-way Yes Way
      #perfLabelOne.sliderLabel
      #perfSliderOne(name="perfSliderOne")
    br
    h4 
      | What is the level of utility to the customer we are trying to reach?
    br
    .slider-container
    .slider-container
      .slider-end-labels
        span.no-way No Way
        span.yes-way Yes Way
      #perfLabelTwo.sliderLabel
      #perfSliderTwo(name="perfSliderTwo")
    br
    h4 
      | Will your idea enable a user to effectively all aspects of the user's problem?
    br
    .slider-container
      .slider-end-labels
        span.no-way No Way
        span.yes-way Yes Way
    .slider-container
      #perfLabelThree.sliderLabel
      #perfSliderThree(name="perfSliderThree")
    br
    button.btn.btn-success Continue >

  script(src='https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js')
  script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js')
  script(src='//code.jquery.com/ui/1.11.4/jquery-ui.js')
  script(src='http://underscorejs.org/underscore-min.js')  
  script(type="text/javascript").
    var labelArr = _.range(101).map(function(number){
      return number.toString();
    });
    var initialValue=50, min=1, max=100;

    ////////////////////////////////////////////
    // SET UP SLIDER ONE
    ////////////////////////////////////////////
    $("#perfSliderOne").slider({
      value:initialValue,
      min: min,
      max: max,
      step: 1,
      slide: function( event, ui ) {
          $("#perfLabelOne").text(labelArr[ui.value]);
          $("#perfLabelOne").css("margin-left", (ui.value-min)/(max-min)*100+"%");
          $("#perfLabelOne").css("left", "-50px");
      }
    });
    $("#perfLabelOne").text(labelArr[initialValue]);
    $("#perfLabelOne" ).css("margin-left", (initialValue -1)/(max-min)*100+"%");
    $("#perfLabelOne").css("left", "-50px");

    ////////////////////////////////////////////
    // SET UP SLIDER TWO
    ////////////////////////////////////////////
    $("#perfSliderTwo").slider({
      value:initialValue,
      min: min,
      max: max,
      step: 1,
      slide: function( event, ui ) {
          $("#perfLabelTwo").text(labelArr[ui.value]);
          $("#perfLabelTwo").css("margin-left", (ui.value-min)/(max-min)*100+"%");
          $("#perfLabelTwo").css("left", "-50px");
      }
    });
    $("#perfLabelTwo").text(labelArr[initialValue]);
    $("#perfLabelTwo" ).css("margin-left", (initialValue -1)/(max-min)*100+"%");
    $("#perfLabelTwo").css("left", "-50px");

    ////////////////////////////////////////////
    // SET UP SLIDER THREE
    ////////////////////////////////////////////
    $("#perfSliderThree").slider({
      value:initialValue,
      min: min,
      max: max,
      step: 1,
      slide: function( event, ui ) {
          $("#perfLabelThree").text(labelArr[ui.value]);
          $("#perfLabelThree").css("margin-left", (ui.value-min)/(max-min)*100+"%");
          $("#perfLabelThree").css("left", "-50px");
      }
    });
    $("#perfLabelThree").text(labelArr[initialValue]);
    $("#perfLabelThree" ).css("margin-left", (initialValue -1)/(max-min)*100+"%");
    $("#perfLabelThree").css("left", "-50px");

    $("button.btn-success").click(function(event){
      var sliderOneValue = $("#perfSliderOne").slider("value");
      var inputOne = $("<input>")
               .attr("type", "hidden")
               .attr("name", "perfSliderOneValue").val(sliderOneValue);
      var sliderTwoValue = $("#perfSliderTwo").slider("value");
      var inputTwo = $("<input>")
               .attr("type", "hidden")
               .attr("name", "perfSliderTwoValue").val(sliderTwoValue);
      var sliderThreeValue = $("#perfSliderThree").slider("value");
      var inputThree = $("<input>")
               .attr("type", "hidden")
               .attr("name", "perfSliderThreeValue").val(sliderThreeValue);
      $('#formPerformability').append($(inputOne))
        .append($(inputTwo))
        .append($(inputThree))
        .submit();
    });