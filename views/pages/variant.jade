doctype html
html
  head
    include ../partials/head.jade
  body
  .header
    include ../partials/header.jade

  .view-idea-suggestions
    h2 Name : #{idea.name}
    
    .container
      h2 Suggestions
      - var suggestionText
      - var problemCategory
      - var accountName
      - var compHeadshot
      - var compHeadshotStyle
      each component, i in suggestionsList
        if(i % 3 === 0 )
          .row
            if (suggestionsList[i])
              .col-md-4
                - suggestionText = suggestionsList[i]['descriptions'][0]
                - accountName = suggestionsList[i]['creator']
                - compHeadshot = headshotURLs[suggestionsList[i]['creator']][0]
                - compHeadshotStyle = headshotURLs[suggestionsList[i]['creator']][1]
                include ../partials/suggestion-element.jade
            if (suggestionsList[i + 1])
              .col-md-4
                - suggestionText = suggestionsList[i + 1]['descriptions'][0]
                - accountName = suggestionsList[i + 1]['creator']
                - compHeadshot = headshotURLs[suggestionsList[i + 1]['creator']][0]
                - compHeadshotStyle = headshotURLs[suggestionsList[i + 1]['creator']][1]
                include ../partials/suggestion-element.jade
            if (suggestionsList[i + 2])
              .col-md-4
                - suggestionText = suggestionsList[i + 2]['descriptions'][0]
                - accountName = suggestionsList[i + 2]['creator']
                - compHeadshot = headshotURLs[suggestionsList[i + 2]['creator']][0]
                - compHeadshotStyle = headshotURLs[suggestionsList[i + 2]['creator']][1]
                include ../partials/suggestion-element.jade
       
      h2 Images with Components
      each image, i in images
        - var imageName
        - var imageURL
        - var compImageStyle
        - var componentList
        - var accountName
        - var compHeadshot
        - var compHeadshotStyle
        if(i % 3 === 0 )
          .row
            .col-md-4
              if(images[i])
                - imageName = images[i][0]
                - imageURL = images[i][4]
                - compImageStyle = images[i][5]
                - componentList = images[i][3]
                - accountName = images[i][1]
                - compHeadshot = headshotURLs[images[i][1]][0]
                - compHeadshotStyle = headshotURLs[images[i][1]][1]
                include ../partials/image-block-element.jade
            .col-md-4
              if(images[i + 1])
                - imageName = images[i + 1][0]
                - imageURL = images[i + 1][4]
                - compImageStyle = images[i + 1][5]
                - componentList = images[i + 1][3]
                - accountName = images[i + 1][1]
                - compHeadshot = headshotURLs[images[i + 1][1]][0]
                - compHeadshotStyle = headshotURLs[images[i + 1][1]][1]
                include ../partials/image-block-element.jade
            .col-md-4
              if(images[i + 2])
                - imageName = images[i + 2][0]
                - imageURL = images[i + 2][4]
                - compImageStyle = images[i + 2][5]
                - componentList = images[i + 2][3]
                - accountName = images[i + 2][1]
                - compHeadshot = headshotURLs[images[i + 2][1]][0]
                - compHeadshotStyle = headshotURLs[images[i + 2][1]][1]
                include ../partials/image-block-element.jade

      br
      button.btn.btn-success#submit(type='submit') Create Variant >

    br
    br
    a.home-logout.btn.btn-default( href="/idea-summary" ) < Back to Idea Summary


  include ../partials/js-includes.jade
  script(type="text/javascript").
    $(".btn.suggest").click(function(){
      $("#suggestion-category").val($(this).attr("id"));
      $("#point-value").val($(this).text());
      $("#problem-type").val($("#selectProblem option:selected").attr("id"));
    });

    $("#submit").click(function(){
      $("#formSuggestion").submit();
      $("#myModal").modal('hide');
    });

    $("#selectProblem").change(function(){
      var problem = $("#selectProblem option:selected").attr("id");
      $.get("/update-suggestion-list/"+problem, function(data){
        document.location.href = "/view-idea-suggestions";
      });
    });


    $('#myModal').on('show.bs.modal', function (event) {
      var link = $(event.relatedTarget); // Button that triggered the modal

      var modal = $(this);
      modal.find('.modal-title').empty();
      modal.find('.modal-body').empty();
      modal.find('.modal-title').append("<h2>" + $(link).text());

      $.get("/image-modal/" + $(link).text(), function(data){
        $(".modal-body").append("<img src="+data.imgURL+" height='300' width='550'>");
      });
    });
