doctype html
html
  head
    include ../partials/head.jade
  body
    .header.navbar.navbar-default
      include ../partials/header.jade


    .container.network-profile.jam-page
      h2 #{networkName}
      h3 Jam Leaders
      each inventor, index in topInventors
        - var inventorImage
        - var inventorImageStyle
        - var inventorName
        - var inventorPoints
        - var inventorAptitudeIds
        - var aptitudes = inventorAptitudes
        - var profileLinkURL
        if index % 3 == 0 
          .row
            .col-md-4
              if(topInventors[index])
                if accountNameAndURLs[topInventors[index].username]
                  - inventorImage = accountNameAndURLs[topInventors[index].username][0]
                  - inventorImageStyle = accountNameAndURLs[topInventors[index].username][1]
                - inventorName = topInventors[index].nickname
                - inventorPoints = topInventors[index].einsteinPoints
                - inventorAptitudeIds = topInventors[index].aptitudes
                include ../partials/inventor-block.jade
            .col-md-4
              if(topInventors[index + 1])
                if accountNameAndURLs[topInventors[index + 1].username]
                  - inventorImage = accountNameAndURLs[topInventors[index + 1].username][0]
                  - inventorImageStyle = accountNameAndURLs[topInventors[index + 1].username][1]
                else
                  - inventorImage = ""
                  - inventorImageStyle = ""
                - inventorName = topInventors[index + 1].nickname
                - inventorPoints = topInventors[index + 1].einsteinPoints
                - inventorAptitudeIds = topInventors[index + 1].aptitudes
                include ../partials/inventor-block.jade
            .col-md-4
              if(topInventors[index + 2 ])
                if accountNameAndURLs[topInventors[index + 2].username]
                  - inventorImage = accountNameAndURLs[topInventors[index + 2].username][0]
                  - inventorImageStyle = accountNameAndURLs[topInventors[index + 2].username][1]
                else 
                  - inventorImage = ""
                  - inventorImageStyle = ""
                - inventorName = topInventors[index + 2].nickname
                - inventorPoints = topInventors[index + 2].einsteinPoints
                - inventorAptitudeIds = topInventors[index + 2].aptitudes
                include ../partials/inventor-block.jade

      h3 Top Jam Ideas
      if ideas.length > 0
        each idea, index in ideas
          - var ideaName
          - var ideaLink
          - var problemCategory
          - var suggestionProblem
          - var accountName
          - var ideaImage
          - var ideaImageStyle
          - var inventorImage
          - var inventorImageStyle
          - var accountNickname
          if index % 3 == 0 
            .row
              .col-md-4
                if(ideas[index])
                  - ideaName = ideas[index][0] || ""
                  - ideaLink = ideas[index][6]
                  - problemCategory = ideas[index][1] || ""
                  - suggestionProblem = ideas[index][2]
                  - accountName = ideas[index][3]
                  - ideaImage = ideas[index][4] || ""
                  - ideaImageStyle = ideas[index][5]
                  - inventorImage = ideas[index][7] || ""
                  - inventorImageStyle = ideas[index][8] || ""
                  - accountNickname = ideas[index][9] || ""
                  include ../partials/view-all-idea-block.jade
              .col-md-4
                if(ideas[index + 1])
                  - ideaName = ideas[index + 1][0] || ""
                  - ideaLink = ideas[index + 1][6]
                  - problemCategory = ideas[index + 1][1] || ""
                  - suggestionProblem = ideas[index + 1 ][2]
                  - accountName = ideas[index + 1][3] || ""
                  - ideaImage = ideas[index + 1][4] || ""
                  - ideaImageStyle = ideas[index + 1][5] || ""
                  - inventorImage = ideas[index + 1][7] || ""
                  - inventorImageStyle = ideas[index + 1 ][8] || ""
                  - accountNickname = ideas[index + 1][9] || ""
                  include ../partials/view-all-idea-block.jade
              .col-md-4
                if(ideas[index + 2 ])
                  - ideaName = ideas[index + 2 ][0] || ""
                  - ideaLink = ideas[index + 2 ][6]
                  - problemCategory = ideas[index + 2 ][1] || ""
                  - suggestionProblem = ideas[index + 2][2]
                  - accountName = ideas[index + 2 ][3] || ""
                  - ideaImage = ideas[index + 2 ][4] || ""
                  - ideaImageStyle = ideas[index + 2][5] || ""
                  - inventorImage = ideas[index + 2 ][7] || ""
                  - inventorImageStyle = ideas[index + 2 ][8] || ""
                  - accountNickname = ideas[index + 2][9] || ""
                  include ../partials/view-all-idea-block.jade
      else
        p <i>No ideas in this aptitude area have been reviewed yet.</i>
        
      br

      h3 Top Imperfections
      .row.imperfection-row
        .idea-summary-data#idea-summary-problems
          ul.idea-summary-problem-list
            each problem, identifier in wholeImperfectionBlockInfo
              if(problem.text && problem['identifier'])
                li.row.imperfection-row
                  div.col-xs-12
                    include ../partials/problem-summary-element.jade


      br

      h3 Top Suggestions
      .row.imperfection-row
        .idea-summary-data#idea-summary-problems
          ul.idea-summary-problem-list
            each suggestion, identifier in wholeSuggestionBlockInfo             
              li.row.imperfection-row
                div.col-xs-12
                  include ../partials/suggestion-summary-element.jade
      br

  #loginModal.modal.fade.annotate-modal(role="dialog")
    .modal-dialog
      .modal-content
        .modal-header
          button(type="button", class="close" data-dismiss="modal") &times;
          .modal-title 
            h2 Sign up to Score
        .modal-body
          form#dsw-signup-form(role='form', action="/register-dsw",method="post")
            .form-group
              input.form-control(type='text', name="nickname", placeholder='Name' required)
            .form-group
              input.form-control(type='email', name="username", placeholder='Email Address' required)
            .form-group
              input.form-control(type="hidden", name="password", value='Password' required)
              input(type="hidden", name="_csrf", value="#{csrfToken}")
            button.btn.btn-default#register-submit(type='submit') Submit
            |  
            a(href='/')
              button.btn.btn-primary(type="button") Cancel
            h4 Login:
            a(href="/auth/google",class="btn btn-danger")
              span.fa.fa-google-plus Google
            |  
            a(href="/auth/facebook",class="btn btn-primary")
              span.fa.fa-facebook Facebook
            |  
            a(href="/auth/linkedin",class="btn btn-info")
              span.fa.fa-linkedin LinkedIn
            |  
            a#ideajam-login
              button.btn.btn-primary(type="button") Idea Jam
          form#dsw-login-form(role='form', action="/login-dsw",method="post", style='max-width: 300px;display: none;')
            .form-group
              input.form-control(type='email', name="username", placeholder='Email Address' required)
            .form-group
              input(type="hidden", name="_csrf", value="#{csrfToken}")
              input.form-control(type='password', name="password", placeholder='Password' required)
            button.btn.btn-default(type='submit') Submit
            |  
            a(href='/')
              button.btn.btn-primary(type="button") Cancel
            |  
            a(href="/forgot-password/")
              h4 Forget your password?

.pagefooter
  include ../partials/footer.jade


  include ../partials/js-includes.jade
  script(type="text/javascript").
    $(window).load(function(){
      if("!{dsw}" == "true"){
        $('#loginModal').modal('show');
      }
    });

    $("#ideajam-login").click(function(event){
      $("#dsw-signup-form").hide();
      $("#dsw-login-form").show();
    });

    $("#register-submit").click(function(event){
      if($("input[name='nickname']").val() == ""){
        event.preventDefault();
        $("input[name='nickname']").after("<p> Please enter a name value.</p>");
      }
      if($("input[name='username']").val() == ""){
        event.preventDefault();
        $("input[name='username']").after("<p> Please enter an email.</p>");
      }
    })